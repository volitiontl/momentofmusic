<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>test</title>

    <script src="http://code.createjs.com/easeljs-0.7.1.min.js"></script>
    <script src="../adobe/game1.js"></script>
    <script src="javascript/lib.js"></script>

    <script>
        var canvas, stage, exportRoot;
        var player;


        function init() {
            canvas = document.getElementById("canvas");
            stage = new createjs.Stage(canvas);
//            player= new lib.beat();
//            stage.addChild(player);
            stage.update();

            createjs.Ticker.setFPS(lib.properties.fps);
            createjs.Ticker.addEventListener("tick", stage);
        }
    </script>
</head>

<body onload="init();" style="background-color:#D4D4D4">
<canvas id="canvas" width="550" height="400" style="background-color:#FFFFFF"></canvas>

<script>

    var state = [];
    var itt = 0;
    var output=initGameOutput();
    function drop(){
        for (var i = 0; i < state.length; i++) {
            state[i].y += 10;
        }

        output(state);
    }
    function dropit(){
        state.push({id: itt++, thetype: "beat", x: 200, y: 0})
        console.log("hihi")

    }
    setInterval(drop,100)

    var ws=initWs();
    var wsUri = "ws://localhost:3000/echo";
    ws.init(wsUri,function(){},function(){},dropit,function(){})

</script>
</body>
</html>